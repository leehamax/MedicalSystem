<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.patient_accountMapper">

    <select id="findByPatientId" parameterType="String" resultType="example.pojo.patient_account">
        SELECT * FROM patient_account WHERE patient_account_id=#{patient_account_id}
    </select>

    <update id="updatePatientAccount" parameterType="example.pojo.patient_account">
        UPDATE patient_account
        SET patient_phone_number=#{patient_phone_number}
        WHERE doctor_account_id=#{doctor_account_id}
    </update>
    <insert id="insertPatient" parameterType="example.pojo.patient_account" useGeneratedKeys="true"  >
        INSERT INTO patient_account (patient_account_id, patient_name, patient_phone_number, patient_identification_id) VALUES (#{patient_account_id},#{patient_name},#{patient_phone_number},#{patient_identification_id})
    </insert>

    <resultMap id="medicalCaseResultMap" type="example.pojo.patient_account">
        <id property="id" column="patient_account_id"/>
        <collection property="medical_caselist" javaType="ArrayList"
                    column="id" ofType="example.pojo.medical_case"
                    select="selectCaseByPatientId"   />
    </resultMap>
    <select id="selectCaseByPatientId" resultType="example.pojo.medical_case">
        SELECT * FROM medical_case WHERE patient_account_id=#{patient_account_id}
    </select>

</mapper>